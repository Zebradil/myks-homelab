#@ load("@ytt:data", "data")
---
image:
  tag: #@ data.values.application.version

providers:
  kubernetesCRD:
    allowCrossNamespace: true

ports:
  web:
    hostPort: 80
    redirectTo:
      port: websecure
  websecure:
    hostPort: 443

service:
  enabled: false

nodeSelector:
  kubernetes.io/hostname: #@ data.values.application.nodeSelector.hostname

updateStrategy:
  rollingUpdate:
    maxUnavailable: 1

securityContext:
  capabilities:
    drop: [ALL]
    add: [NET_BIND_SERVICE]
  runAsNonRoot: false
  runAsUser: 0

additionalArguments:
  -  #@ "--providers.kubernetesingress.ingressendpoint.hostname=" + data.values.application.nodeSelector.hostname

logs:
  general:
    level: DEBUG
  access:
    enabled: true

globalArguments: []
