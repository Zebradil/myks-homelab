#@ load("@ytt:base64", "base64")
#@ load("@ytt:yaml", "yaml")

#@ def secrets_with_data(i, l, r):
#@   return "kind" in l and l["kind"] == "Secret" and "data" in l and l["data"] != None
#@ end

#@ def stringify_data(l, r):
#@   l = yaml.decode(yaml.encode(l))
#@   l["stringData"] = {k: base64.decode(v) for k, v in l["data"].items()}
#@   l.pop("data")
#@   return l
#@ end

#@overlay/match by=secrets_with_data, when="1+"
#@overlay/replace via=stringify_data
---
