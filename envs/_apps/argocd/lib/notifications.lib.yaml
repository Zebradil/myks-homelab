#@ url_tmpl = '<b><a href="{{.context.argocdUrl}}/applications/{{.app.metadata.name}}">{{.app.metadata.name}}</a></b>'
#@ url_op_tmpl = '<b><a href="{{.context.argocdUrl}}/applications/{{.app.metadata.name}}?operation=true">{{.app.metadata.name}}</a></b>'

#@ def templates():
- name: app-created
  notify: true
  #@yaml/text-templated-strings
  message: âœ¨ Application (@= url_tmpl @) has been created.
- name: app-deleted
  notify: true
  #@yaml/text-templated-strings
  message: âŒApplication (@= url_tmpl @) has been deleted.
- name: app-deployed
  notify: false
  #@yaml/text-templated-strings
  message: âœ… Application (@= url_tmpl @) is now running new version of deployments manifests.
- name: app-health-degraded
  notify: true
  #@yaml/text-templated-strings
  message: ğŸ’” Application (@= url_tmpl @) has degraded.
- name: app-sync-failed
  notify: true
  #@yaml/text-templated-strings
  message: |
    âš ï¸ The sync operation of application (@= url_op_tmpl @) has failed at {{.app.status.operationState.finishedAt}} with the following error:
    <pre>
    {{.app.status.operationState.message}}
    </pre>
- name: app-sync-running
  notify: false
  #@yaml/text-templated-strings
  message: ğŸ”„ The sync operation of application (@= url_op_tmpl @) has started at {{.app.status.operationState.startedAt}}.
- name: app-sync-status-unknown
  notify: true
  #@yaml/text-templated-strings
  message: |
    â“ Application (@= url_tmpl @) sync is 'Unknown'.
    <pre>
    {{range $c := .app.status.conditions-}}
    - {{$c.message}}
    {{end-}}
    </pre>
- name: app-sync-succeeded
  notify: false
  #@yaml/text-templated-strings
  message: âœ… Application (@= url_op_tmpl @) has been successfully synced at {{.app.status.operationState.finishedAt}}.
#@ end
