apiVersion: v1
data:
  configuration.yaml: "---\n# yaml-language-server: $schema=https://www.authelia.com/schemas/v4.39/json-schema/configuration.json\ntheme: 'auto'\ndefault_2fa_method: ''\nserver:\n  address: 'tcp://0.0.0.0:9091/'\n  asset_path: ''\n  headers:\n    csp_template: \"\"\n  buffers:\n    read: 4096\n    write: 4096\n  timeouts:\n    read: '6 seconds'\n    write: '6 seconds'\n    idle: '30 seconds'\n  endpoints:\n    enable_pprof: false\n    enable_expvars: false\n    authz:\n      auth-request:\n        implementation: 'AuthRequest'\n      ext-authz:\n        implementation: 'ExtAuthz'\n      forward-auth:\n        implementation: 'ForwardAuth'\nlog:\n  level: 'info'\n  format: 'text'\n  file_path: ''\n  keep_stdout: true\ntelemetry:\n  metrics:\n    enabled: false\nidentity_validation:\n  elevated_session:\n    code_lifespan: '5 minutes'\n    elevation_lifespan: '10 minutes'\n    characters: 8\n    require_second_factor: false\n    skip_second_factor: false\n  reset_password:\n    jwt_lifespan: '5 minutes'\n    jwt_algorithm: 'HS256'\ntotp:\n  disable: false\n  issuer: 'zebradil.dev'\n  skew: 1\n  secret_size: 32\n  algorithm: 'SHA1'\n  digits: 6\n  period: 30\n  allowed_algorithms:\n    - 'SHA1'\n  allowed_digits:\n    - 6\n  allowed_periods:\n    - 30\nwebauthn:\n  disable: false\n  enable_passkey_login: false\n  display_name: 'Authelia'\n  attestation_conveyance_preference: 'indirect'\n  timeout: '60 seconds'\n  filtering:\n    permitted_aaguids: []\n    prohibited_aaguids: []\n    prohibit_backup_eligibility: false\n  selection_criteria:\n    attachment: ''\n    discoverability: 'preferred'\n    user_verification: 'preferred'\n  metadata:\n    enabled: false\n    cache_policy: 'strict'\n    validate_trust_anchor: true\n    validate_entry: true\n    validate_entry_permit_zero_aaguid: false\n    validate_status: true\n    validate_status_permitted: []\n    validate_status_prohibited: []\nntp:\n  address: 'udp://time.cloudflare.com:123'\n  version: 4\n  max_desync: '3 seconds'\n  disable_startup_check: false\n  disable_failure: false\nauthentication_backend:\n  password_reset:\n    disable: false\n    custom_url: ''\n  password_change:\n    disable: false\n  file:\n    path: '/config/users_database.yml'\n    watch: true\n    search:\n      email: false\n      case_insensitive: false\n    password:\n      algorithm: 'argon2'\n      argon2:\n        variant: 'argon2id'\n        iterations: 3\n        memory: 65536\n        parallelism: 4\n        key_length: 32\n        salt_length: 16\n      scrypt:\n        variant: 'scrypt'\n        iterations: 16\n        block_size: 8\n        parallelism: 1\n        key_length: 32\n        salt_length: 16\n      pbkdf2:\n        variant: 'sha512'\n        iterations: 310000\n        salt_length: 16\n      sha2crypt:\n        variant: 'sha512'\n        iterations: 50000\n        salt_length: 16\n      bcrypt:\n        variant: 'standard'\n        cost: 12\npassword_policy:\n  standard:\n    enabled: false\n    min_length: 8\n    max_length: 0\n    require_uppercase: false\n    require_lowercase: false\n    require_number: false\n    require_special: false\n  zxcvbn:\n    enabled: false\n    min_score: 0\nsession:\n  name: 'authelia_session'\n  same_site: 'lax'\n  inactivity: '5 minutes'\n  expiration: '1 hour'\n  remember_me: '1 month'\n  cookies:\n    - domain: 'zebradil.dev'\n      authelia_url: 'https://auth.zebradil.dev'\nregulation:\n  modes:\n  - 'user'\n  max_retries: 3\n  find_time: '2 minutes'\n  ban_time: '5 minutes'\nstorage:\n  local:\n    path: '/config/db.sqlite3'\nnotifier:\n  disable_startup_check: false\n  smtp:\n    address: 'submissions://smtp.gmail.com:465'\n    timeout: '5 seconds'\n    username: '<path:static/smtp.sops.yaml#username>'\n    sender: 'authelia@mail.zebradil.dev'\n    identifier: 'localhost'\n    subject: '[Authelia] {title}'\n    startup_check_address: 'test@authelia.com'\n    disable_html_emails: false\n    disable_require_tls: false\n    disable_starttls: false\n    tls:\n      server_name: ''\n      skip_verify: false\n      minimum_version: 'TLS1.2'\n      maximum_version: 'TLS1.3'\nidentity_providers:\n  oidc:\n    lifespans:\n      access_token: '1 hour'\n      refresh_token: '1 hour and 30 minutes'\n      id_token: '1 hour'\n      authorize_code: '1 minute'\n      device_code: '10 minutes'\n    enforce_pkce: 'public_clients_only'\n    enable_pkce_plain_challenge: false\n    enable_client_debug_messages: false\n    enable_jwt_access_token_stateless_introspection: false\n    minimum_parameter_entropy: 8\n    discovery_signed_response_alg: ''\n    discovery_signed_response_key_id: ''\n    require_pushed_authorization_requests: false\n    jwks:\n      - algorithm: 'RS256'\n        use: 'sig'\n        key_id: 'default'\n        key: | \n          <path:static/oidc.sops.yaml#jwks | jsonPath {.default.key} | indent 10>\n    cors:\n      allowed_origins_from_client_redirect_uris: false\n    clients:\n      - client_id: '<path:static/oidc.sops.yaml#harbor | jsonPath {.client_id}>'\n        client_name: 'Harbor'\n        client_secret: '$pbkdf2-sha512$310000$9DHdvTgaGh3aUcHDMrgAaQ$GGR6taK64IoVw9.xRAtGA1fPfZKvJguYcFlNuiwn1py0ug.A2csjIiqanEBFSO4D.fGGm7KttN.6lc/ngc3wYg'\n        public: false\n        redirect_uris:\n          - 'https://oci.zebradil.dev/c/oidc/callback'\n        scopes:\n          - 'openid'\n          - 'offline_access'\n          - 'profile'\n          - 'groups'\n          - 'email'\n        grant_types:\n          - 'authorization_code'\n          - 'refresh_token'\n        response_types:\n          - 'code'\n        authorization_policy: 'two_factor'\n        consent_mode: 'auto'\n        pre_configured_consent_duration: '1y'\n        require_pushed_authorization_requests: false\n        require_pkce: false\n        pkce_challenge_method: ''\n        authorization_signed_response_alg: 'RS256'\n        authorization_signed_response_key_id: ''\n        authorization_encrypted_response_key_id: ''\n        authorization_encrypted_response_alg: ''\n        authorization_encrypted_response_enc: ''\n        id_token_signed_response_alg: 'RS256'\n        id_token_signed_response_key_id: ''\n        id_token_encrypted_response_key_id: ''\n        id_token_encrypted_response_alg: ''\n        id_token_encrypted_response_enc: ''\n        access_token_signed_response_alg: 'none'\n        access_token_signed_response_key_id: ''\n        access_token_encrypted_response_key_id: ''\n        access_token_encrypted_response_alg: ''\n        access_token_encrypted_response_enc: ''\n        userinfo_signed_response_alg: 'none'\n        userinfo_signed_response_key_id: ''\n        userinfo_encrypted_response_key_id: ''\n        userinfo_encrypted_response_alg: ''\n        userinfo_encrypted_response_enc: ''\n        introspection_signed_response_alg: 'none'\n        introspection_signed_response_key_id: ''\n        introspection_encrypted_response_key_id: ''\n        introspection_encrypted_response_alg: ''\n        introspection_encrypted_response_enc: ''\n        introspection_endpoint_auth_method: 'client_secret_basic'\n        introspection_endpoint_auth_signing_alg: 'RS256'\n        request_object_signing_alg: ''\n        request_object_encryption_alg: 'none'\n        request_object_encryption_enc: ''\n        token_endpoint_auth_method: 'client_secret_basic'\n        token_endpoint_auth_signing_alg: ''\n        revocation_endpoint_auth_method: 'client_secret_basic'\n        revocation_endpoint_auth_signing_alg: 'RS256'\n        pushed_authorization_request_endpoint_auth_method: 'client_secret_basic'\n        pushed_authorization_request_endpoint_auth_signing_alg: 'RS256'\n      - client_id: '<path:static/oidc.sops.yaml#argocd | jsonPath {.client_id}>'\n        client_name: 'Argo CD'\n        client_secret: '$pbkdf2-sha512$310000$fHljICwmWYJUU1clgDqrqg$X2z6OFvOd2PTz.O3aDD1EdXZsZW/2u1./.r1DlUG7Rcel/rya3HoKuopX3JFW002/oEn8jIn.hEhpCeQyuDfwg'\n        public: false\n        redirect_uris:\n          - 'https://argocd.zebradil.dev/auth/callback'\n        scopes:\n          - 'openid'\n          - 'groups'\n          - 'email'\n        grant_types:\n          - 'authorization_code'\n        response_types:\n          - 'code'\n        authorization_policy: 'two_factor'\n        consent_mode: 'auto'\n        pre_configured_consent_duration: '1y'\n        require_pushed_authorization_requests: false\n        require_pkce: false\n        pkce_challenge_method: ''\n        authorization_signed_response_alg: 'RS256'\n        authorization_signed_response_key_id: ''\n        authorization_encrypted_response_key_id: ''\n        authorization_encrypted_response_alg: ''\n        authorization_encrypted_response_enc: ''\n        id_token_signed_response_alg: 'RS256'\n        id_token_signed_response_key_id: ''\n        id_token_encrypted_response_key_id: ''\n        id_token_encrypted_response_alg: ''\n        id_token_encrypted_response_enc: ''\n        access_token_signed_response_alg: 'none'\n        access_token_signed_response_key_id: ''\n        access_token_encrypted_response_key_id: ''\n        access_token_encrypted_response_alg: ''\n        access_token_encrypted_response_enc: ''\n        userinfo_signed_response_alg: 'none'\n        userinfo_signed_response_key_id: ''\n        userinfo_encrypted_response_key_id: ''\n        userinfo_encrypted_response_alg: ''\n        userinfo_encrypted_response_enc: ''\n        introspection_signed_response_alg: 'none'\n        introspection_signed_response_key_id: ''\n        introspection_encrypted_response_key_id: ''\n        introspection_encrypted_response_alg: ''\n        introspection_encrypted_response_enc: ''\n        introspection_endpoint_auth_method: 'client_secret_basic'\n        introspection_endpoint_auth_signing_alg: 'RS256'\n        request_object_signing_alg: ''\n        request_object_encryption_alg: 'none'\n        request_object_encryption_enc: ''\n        token_endpoint_auth_method: 'client_secret_basic'\n        token_endpoint_auth_signing_alg: ''\n        revocation_endpoint_auth_method: 'client_secret_basic'\n        revocation_endpoint_auth_signing_alg: 'RS256'\n        pushed_authorization_request_endpoint_auth_method: 'client_secret_basic'\n        pushed_authorization_request_endpoint_auth_signing_alg: 'RS256'\n      - client_id: '<path:static/oidc.sops.yaml#argocd-cli | jsonPath {.client_id}>'\n        client_name: 'Argo CD (CLI)'\n        public: true\n        redirect_uris:\n          - 'http://localhost:8085/auth/callback'\n        scopes:\n          - 'openid'\n          - 'offline_access'\n          - 'groups'\n          - 'email'\n        grant_types:\n          - 'authorization_code'\n          - 'refresh_token'\n        response_types:\n          - 'code'\n        authorization_policy: 'two_factor'\n        consent_mode: 'auto'\n        pre_configured_consent_duration: '1y'\n        require_pushed_authorization_requests: false\n        require_pkce: true\n        pkce_challenge_method: 'S256'\n        authorization_signed_response_alg: 'RS256'\n        authorization_signed_response_key_id: ''\n        authorization_encrypted_response_key_id: ''\n        authorization_encrypted_response_alg: ''\n        authorization_encrypted_response_enc: ''\n        id_token_signed_response_alg: 'RS256'\n        id_token_signed_response_key_id: ''\n        id_token_encrypted_response_key_id: ''\n        id_token_encrypted_response_alg: ''\n        id_token_encrypted_response_enc: ''\n        access_token_signed_response_alg: 'none'\n        access_token_signed_response_key_id: ''\n        access_token_encrypted_response_key_id: ''\n        access_token_encrypted_response_alg: ''\n        access_token_encrypted_response_enc: ''\n        userinfo_signed_response_alg: 'none'\n        userinfo_signed_response_key_id: ''\n        userinfo_encrypted_response_key_id: ''\n        userinfo_encrypted_response_alg: ''\n        userinfo_encrypted_response_enc: ''\n        introspection_signed_response_alg: 'none'\n        introspection_signed_response_key_id: ''\n        introspection_encrypted_response_key_id: ''\n        introspection_encrypted_response_alg: ''\n        introspection_encrypted_response_enc: ''\n        introspection_endpoint_auth_method: 'none'\n        introspection_endpoint_auth_signing_alg: 'RS256'\n        request_object_signing_alg: ''\n        request_object_encryption_alg: 'none'\n        request_object_encryption_enc: ''\n        token_endpoint_auth_method: 'none'\n        token_endpoint_auth_signing_alg: ''\n        revocation_endpoint_auth_method: 'none'\n        revocation_endpoint_auth_signing_alg: 'RS256'\n        pushed_authorization_request_endpoint_auth_method: 'none'\n        pushed_authorization_request_endpoint_auth_signing_alg: 'RS256'\naccess_control:\n  default_policy: 'deny'\n  rules:\n    - policy: two_factor\n      domain:\n        - '*.zebradil.dev'\n      subject:\n        - ['group:dev']\n        - ['group:admins']\n...\n"
kind: ConfigMap
metadata:
  annotations:
    a8r.io/repository: https://github.com/Zebradil/myks-homelab
  labels:
    app.kubernetes.io/instance: authelia
    app.kubernetes.io/name: authelia
  name: authelia
  namespace: authelia
