apiVersion: v1
kind: Secret
metadata:
  annotations:
    a8r.io/repository: https://github.com/Zebradil/myks-homelab
  name: attic-config
stringData:
  attic.toml: |
    allowed-hosts = []
    listen = "[::]:8080"

    [chunking]
      avg-size = 65536
      max-size = 262144
      min-size = 16384
      nar-size-threshold = 65536

    [compression]
      type = "zstd"

    [database]
      url = "sqlite:///data/attic.db"

    [garbage-collection]
      interval = "12 hours"

    [jwt]
      [jwt.signing]
        token-rs256-secret-base64 = "<path:static/0.sops.yaml#token-rs256-secret-base64>"

    [storage]
      path = "/data/storage"
      type = "local"
