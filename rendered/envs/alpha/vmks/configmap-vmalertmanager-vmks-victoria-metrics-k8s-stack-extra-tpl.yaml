apiVersion: v1
data:
  telegram.tmpl: "{{ define \"alert_list\" }}{{ range . }}\n---\n\U0001FAAA <b>{{ .Labels.alertname | html }}</b>\n{{- if eq .Labels.severity \"critical\" }}\n\U0001F6A8 CRITICAL \U0001F6A8 {{ end }}\n{{- if eq .Labels.severity \"warning\" }}\n⚠️ WARNING ⚠️{{ end }}\n{{- with .Annotations.summary | html }}\n\U0001F4DD {{ . }}{{ end }}\n{{- with .Annotations.description | html }}\n\U0001F4D6 {{ . }}{{ end }}\n\n\U0001F3F7 Labels:\n{{ range .Labels.SortedPairs }}  <i>{{ .Name | html }}</i>: <pre>{{ .Value | html }}</pre>\n{{ end }}\n\U0001F6E0 <a href=\"{{ .GeneratorUrl }}\">Source</a>\n{{- with .Annotations.runbook_url }}\n\U0001F4DA <a href=\"{{ . }}\">Runbook</a>\n{{ end }}{{ end }}\n{{ end }}\n\n{{ define \"telegram.message\" }}\n{{ if gt (len .Alerts.Firing) 0 }}\n\U0001F525 Alerts Firing \U0001F525\n{{ template \"alert_list\" .Alerts.Firing }}\n{{ end }}\n{{ if gt (len .Alerts.Resolved) 0 }}\n✅ Alerts Resolved ✅\n{{ template \"alert_list\" .Alerts.Resolved }}\n{{ end }}\n\U0001F517 <a href=\"{{ .ExternalURL }}\">Alertmanager UI</a>\n{{ end }}"
kind: ConfigMap
metadata:
  annotations:
    a8r.io/repository: https://github.com/Zebradil/myks-homelab
  labels:
    app.kubernetes.io/component: victoria-metrics-k8s-stack-alertmanager
    app.kubernetes.io/instance: vmks
    app.kubernetes.io/name: victoria-metrics-k8s-stack
  name: vmalertmanager-vmks-victoria-metrics-k8s-stack-extra-tpl
  namespace: vmks
